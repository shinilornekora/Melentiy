*, *::before, *::after {
    box-sizing: border-box;
    margin:0;
    padding:0;
}

html, body {
    height: 100%;
    min-height: 100%;
}

body {
    min-height: 100vh;
    width: 100vw;
    overflow-x: hidden;
    font-family: 'Montserrat', Arial, Helvetica, sans-serif;
    background: #111;
    color: #fcfdff;
    position: relative;
    transition: background 1s cubic-bezier(.9,0,.1,1);
}

body.loaded {
    background: #101020;
}

.bg-blob {
    position: fixed;
    top: -10vw;
    left: -15vw;
    width: 55vw;
    height: 50vw;
    z-index: 0;
    pointer-events: none;
    filter: blur(70px) brightness(0.88) saturate(1.7);
    background: radial-gradient(circle at 60% 40%, #a8f1ff 0%, #3995ec 60%, #6b56ce 85%, transparent 100%);
    opacity: 0.6;
    animation: floatblob 42s cubic-bezier(.65,.06,.3,1) infinite alternate;
    transition: opacity .5s;
}

.bg-blob.second {
    top: 60vh;
    left: 65vw;
    width: 45vw;
    height: 49vw;
    background: radial-gradient(circle at 50% 60%, #ff92e7 0%, #e5f265 40%, #53ffc5 99%, transparent 100%);
    opacity: 0.47;
    filter: blur(80px) brightness(0.95) saturate(1.4);
    animation: floatblob2 56s cubic-bezier(.35,.1,.75,1) infinite alternate;
}

@keyframes floatblob {
    from {
        transform:translate(0,0) scale(1.2);
    }
    61% {
        transform:translate(12vw,10vh) scale(1.08);
    }
    95%,to {
        transform:translate(-20vw,13vh) scale(1.28);
    }
}
@keyframes floatblob2 {
    from {
        transform:translate(0,0) scale(1);
    }
    38% {
        transform:translate(7vw,-4vw) scale(.98);
    }
    67% {
        transform:translate(-12vw,-20vh) scale(1.2);
    }
    to {
        transform: translate(-10vw,-16vw) scale(1.07);
    }
}

.glass {
    background: rgba(35, 36, 84, 0.56);
    border: 1.5px solid rgba(255,255,255,.16);
    box-shadow: 0 8px 64px 8px rgba(61,142,255,0.09), 0 1.5px 12px 0 rgba(255,255,255,.052);
    border-radius: 30px;
    backdrop-filter: blur(10px) saturate(1.33);
    -webkit-backdrop-filter: blur(10px) saturate(1.33);
}

.wrapper {
    min-height: 98vh;
    width: 96vw; max-width: 960px;
    box-shadow: 0 8px 32px 6px rgba(54,64,125,.17);
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 46px;
    justify-content: center;
    margin: 2vw auto;
    position:relative;
    z-index: 1;
    transition: box-shadow .7s;
}

.title {
    width: 100%;
    font-family: 'Orbitron', 'Montserrat', 'Trebuchet MS', sans-serif;
    text-align: center;
    font-size: clamp(2.7rem, 7vw, 6rem);
    letter-spacing: 0.07em;
    font-weight: 900;
    padding-top: 1.4vw;
    margin-bottom: -1.2vw;
    color: #e8f2ff;
    filter: drop-shadow(0 0 16px #12f5ff66);
    text-shadow: 0 0 20px #00ffff84, 0 6px 24px #2de9fb29, 0 -1px 3px #fff2;
    animation: neonpulse 3.5s ease-in-out infinite alternate;
}
.title:focus {
    outline: none;
    box-shadow: 0 0 0 3px #30fcee62;
}

@keyframes neonpulse {
    0% {
        text-shadow: 0 0 8px #21e4ff8c, 0 6px 34px #f7f8ff22;
    }
    45% {
        text-shadow: 0 0 30px #00f0ff88, 0 16px 46px #48fff566;
    }
    100% {
        text-shadow: 0 0 24px #10d7ecb9, 0 6px 16px #1fffff62;
    }
}

/* --- SECTION/SUBTITLE --- */
.subtitle {
    font-size: clamp(1.1rem, 2vw, 1.55em);
    font-weight: 400;
    color: #fbe4ff;
    letter-spacing:0.01em;
    opacity: 0.98; 
    padding: 0.6rem 2.4vw;
    border-radius: 12px;
    text-align: center;
    box-shadow: 0 4px 28px 0 rgba(222, 216, 255, 0.04);
    margin-bottom: -1vw;
    transition: background .6s;
    animation: fadeinsection 2.5s .4s cubic-bezier(.35,1,.41,1.18) both;
}
@keyframes fadeinsection {
    0% {
        opacity: 0;
        transform: translateY(30px) scale(.93);
    }
    100% {
        opacity: .98;
        transform: none;
    }
}

/* --- FORM --- */
.form {
    margin: 0 auto;
    width: 100%;
    gap: 28px;
    background: rgba(25,20,32,0.34);
    padding: 2vw 3vw;
    display: flex;
    flex-direction: column;
    align-items: center;
    border-radius: 24px;
    box-shadow: 0 10px 32px -8px #103a5920;
    position:relative;
    transition: box-shadow .5s;
    border: 1.2px solid rgba(173, 221, 255, 0.09);
}

.textarea-wrapper {
    position:relative;
    width: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
}

.topic {
    font-family: 'Montserrat', monospace, sans-serif;
    font-size: 1.08rem;
    smin-width: 220px;
    height: 33vh; min-height: 120px; max-height: 360px;
    color: #f5faff;
    background: linear-gradient(107deg, rgba(24,17,39,0.93), rgba(27,46,70,0.76) 70%);
    border: 2.5px solid #3ee7fff0;
    border-radius: 22px;
    box-shadow: 0 12px 64px -18px #14e2f921, 0 4px 14px 0 #117cbb16;
    padding: 20px 18px 20px 18px;
    outline: none;
    margin-right: 0;
    margin-bottom: 0;
    resize: vertical;
    caret-color: #11ffff;
    letter-spacing: 0.02em;
    line-height: 1.55;
    transition:
        box-shadow .23s cubic-bezier(.7,.1,.2,1.12),
        border .33s cubic-bezier(.55,0,.72,1.36),
        color .17s;
    overflow-y: auto;
}

.topic:focus {
    background: linear-gradient(107deg, rgba(25,26,42,0.98), rgba(23,66,98,0.79) 65.1%);
    border-color: #26f1f5d5;
    color: #fff7fa;
    box-shadow: 0 0 0 4px #00fff8c6, 0 8px 34px 2px #17e2f928;
}

.topic::placeholder {
    color: #bad5ffbb;
    letter-spacing: 0.03em;
    font-style: italic;
    opacity: 0.9;
}

.textarea-border-anim {
    content:'';
    position: absolute;
    inset: 0;
    border-radius: 22px;
    pointer-events: none;
    z-index: 2;
    border: 0 solid transparent;
    transition: border 0.7s cubic-bezier(.57,1.34,.52,.97);
    box-shadow: none;
}

.textarea-border-anim.active {
    border: 2.5px solid #91eaff;
    box-shadow: 0 0 24px #8edbffe9, 0 0 72px #09e2ff33;
    animation: textarea-outline-blink .9s cubic-bezier(.8,0,.17,1.2) 1;
}

@keyframes textarea-outline-blink {
    0% {
        box-shadow:0 0 0 0 #00fff363;
    }
    75% {
        box-shadow:0 0 18px 6px #3afcff55;
    }
    100% {
        box-shadow:0 0 22px 0 #18e6f544;
    }
}

.actionButton {
    margin-top: .6vw;
    position: relative;
    font-family: 'Orbitron', 'Montserrat', sans-serif;
    font-weight: bold;
    font-size: 1.38rem;
    color: #232118;
    letter-spacing:0.09em;
    text-shadow: 0 0 5px #fff4,
                 0 0 10px #9ae1ff,
                 0 3px 5px #bae5ff22;
    background: linear-gradient(91deg, #24ffe1 0%, #2e5cff 100%);
    border: none;
    box-shadow:
      0 7px 29px -8px #10e9ff90,
      0 1.8px 8px 0 #9ffbff33;
    border-radius: 17px;
    padding: 15px 45px;
    cursor: pointer;
    outline: none;
    overflow: hidden;
    transition:
        background 340ms cubic-bezier(.7,.1,.2,1.12),
        color 420ms cubic-bezier(.7,.09,.18,1),
        box-shadow 350ms cubic-bezier(.5,.07,.42,1.69),
        transform 120ms cubic-bezier(.87,.03,.12,1.02);
}
.actionButton:hover, .actionButton:focus {
    background: linear-gradient(91deg, #ff80fa 0%, #24ffe1 100%);
    color: #1c0065;
    box-shadow:
        0 0 30px 5px #12ffff66,
        0 18px 70px -7px #ec69ff33,
        0 3.8px 24px 2px #ec7cff24;
    transform: scale(1.044);
    animation: btnshadowglw 0.7s cubic-bezier(.54,1.45,.11,1) 1;
}
@keyframes btnshadowglw {
    0% {
        box-shadow:0 0 0 0 #97deff77; }
    70% {
        box-shadow:0 0 32px 12px #b5daf782;
    }
    100% {
        box-shadow:0 0 38px 6px #c0fcff6c;
    }
}
.actionButton:active {
    transform: scale(.97) translateY(1.8px);
    box-shadow:
      0 3px 14px #50fceebb,
      0 0.5px 6px 0 #ec92ff29;
    background: linear-gradient(89deg, #53ffc5 0%, #ffb8e4 100%);
}

details.details {
    width: 97%;
    max-width: 700px;
    margin: 0 auto 40px auto;
    border-radius: 20px;
    background: rgba(255,255,255,0.06);
    padding: 1.4rem 2.7vw 1.3rem 2vw;
    box-shadow: 0 1px 22px #eef91e05;
    color: #f9eaff;
    font-size: 1.07rem;
    cursor: pointer;
    border: none;
    position:relative;
    overflow: hidden;
    letter-spacing:0.018em;
    transition:
        box-shadow 0.45s cubic-bezier(.6,1.5,.1,1),
        background .64s cubic-bezier(.61,.39,.65,1.25);
}

details.details[open] {
    background: rgba(255,255,255,0.22);
    box-shadow: 0 0 48px 5px #24d3d237, 0 6px 9px -2px #4fc3ff3c;
    color: #32213a;
    animation: detailsshadowfade 0.8s cubic-bezier(.27,1.16,.74,1.1);
}
@keyframes detailsshadowfade {
    from {
        box-shadow: 0 0 60px #00e8ff66;
    }
    to {
        box-shadow: 0 0 48px 5px #24d3d237;
    }
}

details.details[open] p {
    color: #211c20;
    background: rgba(255,255,255,0.10);
    border-radius: 9px;
    padding: 0.22em .6em;
    box-shadow: 0 2px 9px #ff92e712;
}

details.details summary {
    font-size: 1.12em;
    font-weight: bolder;
    position: relative;
    cursor: pointer;
    color: #7bfff8;
    text-shadow: 0 0 6px #b8ffe4a6, 0 0 2px #fff6;
    transition: color .12s, text-shadow .27s;
    outline: none;
    border: none;
    margin-bottom:.6em;
    filter: drop-shadow(0 2px 2px #0dffe144);
}

details.details summary::-webkit-details-marker {
    display: none;
}

details.details summary:before {
    content: "ðŸ”’";
    margin-right: 0.6em;
    font-size: 1.1em;
    filter: drop-shadow(0 0 7px #fb7fff9c);
    animation: lockglow 2.5s cubic-bezier(.3,.93,.5,1.1) infinite alternate;
}

@keyframes lockglow {
    0% {
        filter: drop-shadow(0 0 5px #fff6)
    }
    100% {
        filter: drop-shadow(0 0 16px #ff93fb99)
    }
}

details.details[open] summary:before {
    content: "âœ…";
    color: #b9ff9a;
    filter: drop-shadow(0 0 15px #9affa5);
}

.details p mark  {
    background: linear-gradient(93deg, #b3fffc88, #f5baff88 71%, #fcfb7f88);
    color: #143e45;
    padding: .04em .18em;
    border-radius: 4px;
    font-style:italic;
}
.details p {
    font-size: 1.03rem;
}

.neon, .neon-glow {
    filter: drop-shadow(0 0 14px #00fdff92);
}

.neon {
    color: #90ffe3;
    text-shadow: 0 0 6px #00f0ff70, 0 1px 8px #ff92e7cc;
}

.footer {
    font-size: 1.08rem;
    width: 100%;
    position: absolute;
    bottom: 0;
    padding: 1.1em 1.5em 1.5em 0;
    text-align: right;
    color: #e0e8f8c5;
    letter-spacing: .058em;
    border-top: 1px solid #2a4455c2;
    margin-top: 2vw;
    border-radius: 0 0 19px 19px;
    opacity: .84;
    background: rgba(40,42,90,0.14);
    box-shadow: 0 0 0 transparent;
}

.fade-in {
    animation: fadeinsection 2.5s .13s both;
}

.slide-in {
    animation: slideinblock .95s .35s cubic-bezier(.45,1,.45,1.09) both;
}

@keyframes slideinblock {
    0% {
        opacity:0;transform:translateY(30px) scale(.97);
    }
    100% {
        opacity:1;transform:none;
    }
}

::-webkit-scrollbar {
    width: 0.8em;
    background: linear-gradient(#080b1d, #1a1e36);
}

::-webkit-scrollbar-thumb {
    background: linear-gradient(97deg, #a8e9ff 40%, #ec92ff 90%);
    border-radius: 22px;
    box-shadow: 0 2px 16px #fb96ffc8;
}

::-webkit-scrollbar-thumb:hover {
    background: linear-gradient(90deg, #33f6f7, #ec8fff);
}

textarea {
    width: 100%;
}

textarea::-webkit-scrollbar-thumb {
    background: #53ffc5b5;
}

textarea::-webkit-scrollbar-thumb:hover {
    background: #ff92e7b2;
}

@media (max-width: 730px){
    .wrapper {
        max-width: calc(99vw - 8px);
    }
    .topic {
        width:96vw;
        max-width:99vw;
        min-width:90vw;
    }
    .form {
        padding: 7vw 2vw;
        border-radius:14px;
    }
    .footer {
        font-size:.98rem;
    }
    .details {
        font-size:.97rem;
    }
}

@media (max-width: 480px) {
    .title {
        font-size: 9vw;
    }
    .subtitle {
        font-size: 1.05rem;
    }
    .topic {
        height: 20vh;
    }
    .wrapper {
        gap: 16px;
    }
    .footer {
        font-size:.89rem;
    }
    .form {
        border-radius:8px;
    }
    details.details {
        padding: 1.1rem 2vw;
    }
}

:focus-visible {
    outline: 2.5px solid #00fff5;
    outline-offset: 1.3px;
}


.spaceinvaders-popup {
    position: fixed; z-index: 99999;
    top: 0; left: 0; right: 0; bottom: 0;
    backdrop-filter: blur(3px) brightness(0.7);
    background: #150040c9;
    display: flex; align-items: center; justify-content: center;
    animation: popupfadein .23s;
}
@keyframes popupfadein { 0%{ opacity:0;} 100%{opacity:1;} }

.si-popup-inner {
    background: #151b3460;
    border-radius: 18px;
    min-width: 340px;
    max-width: 98vw;
    min-height: 180px;
    box-shadow: 0 10px 42px #0009;
    padding: 2em 2.3em;
    position: relative;
    text-align: center;
}

.si-popup-inner h2 {
    font-family: 'Orbitron', sans-serif;
    color: #00fdfa;
}

.si-dialog__actions {
    margin-top: 1.2em;
    display: flex; justify-content: center; gap: 1em;
}
.si-exit {
    position: absolute;
    right: 10px;
    top: 5px;
    background: transparent;
    font-size: 2em; line-height: 1;
    border: none; color: #fff;
    cursor: pointer;
    filter: drop-shadow(0 0 9px #ff2afbbb);
    z-index: 1;
}

#spaceInvadersCanvas {
    margin-top: 1em;
    background: linear-gradient(to bottom,#18198f 70%,#790065 110%);
    border: 3px solid #00fff2bf;
    box-shadow: 0 0 32px #00fff255;
    display: block;
}

.history-panel {
    position: fixed;
    top: 44px;
    left: 0;
    min-width: 56px;
    width: 320px;
    max-width: 85vw;
    height: 78vh;
    min-height: 248px;
    z-index: 15;
    border-radius: 0 18px 18px 0;
    box-shadow: 3px 0 25px #3a008255;
    transition: width 0.3s cubic-bezier(.5, .6, .23, 1), background 0.25s;
    display: flex;
    flex-direction: column;
    background: rgba(24,24,44,0.73);
    backdrop-filter: blur(6px);
    overflow-x: hidden;
    overflow-y: auto;
}

.history-panel.closed {
    width: 56px;
    min-width: 56px;
    box-shadow: none;
}
.history-title {
    margin: 15px 0 10px 65px;
    font-size: 1.18em;
    font-family: 'Orbitron', sans-serif;
    font-weight: 700;
    letter-spacing: 0.03em;
    color: #97f0fa;
    opacity: .98;
    transition: opacity .2s;
    user-select: none;
}
.history-panel.closed .history-title,
.history-panel.closed .history-list {
    opacity: 0;
    pointer-events: none;
}
.history-toggle {
    position: absolute;
    left: 8px; top: 8px;
    width: 36px; height: 36px;
    border: none;
    border-radius: 50%;
    background: #171847e0;
    color: #7ae7e7;
    font-size: 1.3em;
    box-shadow: 0 2px 11px #81f7e299;
    transition: background .19s;
    cursor: pointer;
    z-index: 2;
    display: flex; align-items: center; justify-content: center;
}
.history-panel.closed .history-toggle {
    left: 8px;
}
.history-list {
    list-style: none;
    padding: 1.35em 1.1em 1em 1.35em;
    margin: 0;
    overflow-y: auto;
    transition: opacity .27s;
    font-family: 'Montserrat', sans-serif;
    font-size: .97em;
}
.history-list li {
    background: #1a224a60;
    margin-bottom: 12px;
    padding: 9px 14px 9px 10px;
    border-radius: 8px;
    color: #f9f9ff;
    border-left: 3.6px solid #19f6fb;
    font-size: .99em;
    word-break: break-word;
    box-shadow: 0 2px 12px #4aecfa18;
    transition: background .2s;
}
.history-list li:last-child {
    border-left-color: #e949f7;
    background: #181929dd;
    font-weight: 600;
}
@media (max-width:600px) {
    .history-panel { width:90vw; left:0; top: 8px; min-height:120px;}
}


.generation-modal {
    position: fixed;
    top: 30px;
    right: 36px;
    z-index: 9999;
    background: rgba(28,19,44, 0.9);
    border-radius: 16px;
    box-shadow: 0 4px 24px #5af9fa23;
    padding: 1.1em 2.2em 1.1em 1.6em;
    min-width: 180px;
    min-height: 66px;
    display: flex;
    align-items: center;
    gap: 0.7em;
    animation: genModalIn .18s;
    border: 1.5px solid #2afcfb6e;
}

@keyframes genModalIn {
    0%{ opacity: 0; transform: translateY(-16px) scale(.97); }
    100%{opacity:1; transform: none;}
}
.generation-modal__body {
    display: flex; align-items: center; gap: 1.15em;
}


.generation-modal__spinner {
    width: 36px; height: 36px;
    margin-right: 0.7em;
    display: flex; align-items: center; justify-content: center;
    font-size: 28px;
    transition: color .18s, opacity .22s;
}

.generation-modal__spinner.loader {
    border: 3.5px solid #5bfaff52;
    border-top: 3.5px solid #e660f8;
    border-radius: 50%;
    width: 36px; height: 36px;
    animation: spinGen 0.8s linear infinite;
    content: '';
    box-sizing: border-box;
}

@keyframes spinGen {
    0%{ transform: rotate(0deg);}
    100%{ transform: rotate(360deg);}
}

.generation-modal__spinner.check {
    border: none;
    animation: none;
    color: #79fda8;
    font-size: 34px;
    background: none;
    width: 36px;
    height: 36px;
    display: flex; align-items: center; justify-content: center;
}

.generation-modal__spinner.error {
    border: none;
    animation: none;
    color: #ff668a;
    font-size: 34px;
    background: none;
}

.generation-modal__desc {
    color: #f2faff;
    font-family: 'Orbitron', sans-serif;
    font-size: 1em;
    letter-spacing: 0.02em;
}

.lang-switch {
    position: fixed;
    right: 30px;
    bottom: 26px;
    z-index: 10000;
    background: rgba(28,19,44, 0.93);
    border: 1.5px solid #2afcfb6e;
    border-radius: 14px;
    box-shadow: 0 2px 18px #5af9fa16;
    padding: 7px 14px;
    display: flex;
    gap: 7px;
    align-items: center;
    user-select: none;
}

.lang-switch__btn {
    background: none;
    border: none;
    color: #f2faff;
    font-family: 'Montserrat', sans-serif;
    font-weight: 700;
    font-size: 16px;
    padding: 3px 11px;
    border-radius: 8px;
    cursor: pointer;
    transition: background 0.15s, color 0.13s;
    outline: none;
    opacity: 0.7;
}

.lang-switch__btn.active, .lang-switch__btn:focus {
    background: #2afcfb33;
    color: #09f1c6;
    opacity: 1;
}
